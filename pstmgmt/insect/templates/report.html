{% extends 'base.html' %}
{% load static %}
{% block content %}

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- These are the jQuery extensions taken from bootstrap website to enable the drop down function of the menu bar -->
	<link rel="stylesheet" href="{% static 'plugins/select2-4.0.0/select2.min.css' %} ">
    <script src="{% static 'plugins/jquery/jquery.min.js'%}"></script>
    <script src="{% static 'plugins/select2-4.0.0/select2.min.js'%} "></script>

<style>
		.mselect {
			width: 700%;
		}
	</style>
</head>

{% for info in data %}
<div class="modal fade" id="Mylargemodal" >
    <div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
            <a href="" id="image_href" target="_blank"> <img src="" id="image_src" style="width:1000;height:500px"></a><br><br>

            <div class="container-fluid h-300 "><br>
                <!-- These modifications are done to make the webpage adpative to the screen size and automatically reduce the size when screen is minimized -->
                <div class="row justify-content-left align-items-center h-100">
                    <div class="col col-sm-6 col-md-6 col-lg-4 col-xl-3">
                        <div class="form-group">
                            <!-- Various options in drop down menu to select the types of data that we need -->
                            <select class="mselect" multiple="true">
                                  {% for results in label %}
                                    <option value="{{results.insect_name}}" >{{results.insect_name}}</option>
                                  {%endfor%}
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button id="submit" type="button" class="btn btn-primary">Ok</button>
        </div>
    </div>
    </div>
</div>
{% endfor%}



  <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
                 <h1 class="m-0 text-dark">Report</h1>
          </div><!-- /.col -->
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
                <li class="breadcrumb-item"><a href="">Home</a></li>
                <li class="breadcrumb-item active">Report</li>
            </ol>
          </div><!-- /.col -->
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->
    <section class="content">
      <div class="container-fluid">
        <!-- Info boxes -->
        <div class="row">
<!--          <div class="col-12 col-sm-6 col-md-3">-->
<!--            <div class="info-box">-->
<!--              <span class="info-box-icon bg-info elevation-1"><i class="fas fa-cog"></i></span>-->

<!--              <div class="info-box-content">-->
<!--                <span class="info-box-text">CPU Traffic</span>-->
<!--                <span class="info-box-number">-->
<!--                  10-->
<!--                  <small>%</small>-->
<!--                </span>-->
<!--              </div>-->
<!--              &lt;!&ndash; /.info-box-content &ndash;&gt;-->
<!--            </div>-->
<!--            &lt;!&ndash; /.info-box &ndash;&gt;-->
<!--          </div>-->
          <!-- /.col -->
<!--          <div class="col-12 col-sm-6 col-md-3">-->
<!--            <div class="info-box mb-3">-->
<!--              <span class="info-box-icon bg-danger elevation-1"><i class="fas fa-thumbs-up"></i></span>-->

<!--              <div class="info-box-content">-->
<!--                <span class="info-box-text">Likes</span>-->
<!--                <span class="info-box-number">41,410</span>-->
<!--              </div>-->
<!--              &lt;!&ndash; /.info-box-content &ndash;&gt;-->
<!--            </div>-->
<!--            &lt;!&ndash; /.info-box &ndash;&gt;-->
<!--          </div>-->
          <!-- /.col -->

          <!-- fix for small devices only -->
          <div class="clearfix hidden-md-up"></div>




          <!-- /.col -->
<!--          <div class="col-12 col-sm-6 col-md-3">-->
<!--            <div class="info-box mb-3">-->
<!--              <span class="info-box-icon bg-warning elevation-1"><i class="fas fa-users"></i></span>-->

<!--              <div class="info-box-content">-->
<!--                <span class="info-box-text">New Members</span>-->
<!--                <span class="info-box-number">2,000</span>-->
<!--              </div>-->
<!--              &lt;!&ndash; /.info-box-content &ndash;&gt;-->
<!--            </div>-->
<!--            &lt;!&ndash; /.info-box &ndash;&gt;-->
<!--          </div>-->
          <!-- /.col -->
        </div>

        <!-- Main row -->
        <div class="row">
          <div class="col-md-12">
            <!-- TABLE: LATEST ORDERS -->
            <div class="card">
              <div class="card-header border-transparent">
                <h3 class="card-title">Transactions</h3>

                <div class="card-tools">
                  <button type="button" class="btn btn-tool" data-card-widget="collapse">
                    <i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn btn-tool" data-card-widget="remove">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
              <!-- /.card-header -->
              <div class="card-body p-0">
                <div class="table-responsive">
                  <table class="table m-0">
                    <thead>
                    <tr>
                      <th>Transaction Image</th>
                      <th>Transaction Message</th>

                      <th>Transaction From</th>
                        <th>Insect Found</th>
                        <th>Insect Advisory</th>
                        <th>Option</th>
                    </tr>
                    </thead>
                    <tbody>

                    {% for info in data %}
                      <tr>
                        <td><a href="{{info.trans_media.url}}" target="_blank"> <img src="{{info.trans_media.url}}" style="width:30;height:30px"></a></td>
                        <td>{{info.transation_fk.trans_msg}}</td>
                         <td>{{info.transation_fk.trans_from}}</td>
                          <td>{{info.insects}}</td>
                          <td>{{info.insects}}</td>
                          {% if info.insects == "" %}
                          <td><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#Mylargemodal" data-whatever="{{info.trans_media.url}}">More</button></td>
                          {%endif%}
                      </tr>
                    {% endfor %}

                    </tbody>
                  </table>
                </div>
                <!-- /.table-responsive -->
              </div>
              <!-- /.card-body -->
<!--              <div class="card-footer clearfix">-->
<!--                <a href="" class="btn btn-sm btn-info float-left">Add New Insect</a>-->
<!--                <a href="" class="btn btn-sm btn-secondary float-right">View All Insects</a>-->
<!--              </div>-->
              <!-- /.card-footer -->
            </div>
            <!-- /.card -->
          </div>
          <!-- /.col -->

          <!-- /.col -->
        </div>
        <!-- /.row -->
      </div>
      <!--/. container-fluid -->
    </section>
    <!-- /.content -->
<script>
$(document).on('show.bs.modal', '#Mylargemodal',function(event){
  var button = $(event.relatedTarget) // Button that triggered the modal
  var recipient = button.data('whatever') // Extract info from data-* attributes
  // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
  // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
  var modal = $(this)
  modal.find('#image_href').attr("href",recipient)
  modal.find('#image_src').attr("src",recipient)
  //$ modal.attr('href',recipient);
  //$(".modalbody").attr('src',recipient);
  //$('#image_href', model).attr('href', recipient)
  //$('#image_src', model).attr('src', recipient)
})
</script>

<script>
    $(document).ready(function() {
        $(".mselect").select2({
            placeholder: "Select Insect Name",
            tags: true,


        });
    })
</script>





{% endblock %}
